<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Bot CÃ³digo de Aposta</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">
    <h1>ğŸ° BOT DE APOSTA</h1>

    <p class="tempo">â³ Tempo restante: {{ tempo }}</p>

    <!-- STATUS DINÃ‚MICO -->
    <div class="status" id="status">ğŸ¤” ANALISANDO...</div>
    <div id="signal" class="signal"></div>

    <!-- BOTOES DE RESULTADOS -->
    <div class="controls">
        <button onclick="addResult('P')">PLAYER</button>
        <button onclick="addResult('B')">BANKER</button>
        <button onclick="addResult('T')">EMPATE</button>
    </div>

    <h2>ğŸ“œ HistÃ³rico</h2>
    <div class="historico">
        <ul id="historyList">
            {% for item in historico %}
                <li>{{ item.tipo }} - <small>{{ item.hora }}</small></li>
            {% endfor %}
        </ul>
    </div>
</div>

<script>
let history = [];

// Adiciona resultado manual
function addResult(r) {
    history.push(r);

    const list = document.getElementById("historyList");
    const item = document.createElement("li");
    item.textContent = new Date().toLocaleTimeString() + " â†’ " + r;
    list.prepend(item);

    // Analisa os Ãºltimos 3 resultados
    if (history.length >= 3) {
        analyze();
    }
}

// Analise de sinais
function analyze() {
    const last = history.slice(-3).join("");
    const status = document.getElementById("status");
    const signal = document.getElementById("signal");

    if (last === "BBB") {
        status.className = "status green";
        status.innerHTML = "ğŸ˜„ğŸ”¥ ENTRAR AGORA";
        signal.innerHTML = "ğŸŸ¢ APOSTAR BANKER <br> ğŸ›¡ï¸ EMPATE";
    } else if (last === "PPP") {
        status.className = "status green";
        status.innerHTML = "ğŸ˜„ğŸ”¥ ENTRAR AGORA";
        signal.innerHTML = "ğŸŸ¢ APOSTAR PLAYER <br> ğŸ›¡ï¸ EMPATE";
    } else {
        status.className = "status red";
        status.innerHTML = "âŒ AGUARDAR";
        signal.innerHTML = "";
    }
}
</script>

</body>
</html>
